# simple-story-narrator

**simple-story-narrator** is a Python tool that generates narrated scenes and character-driven conversations for stories, using Large Language Models (LLMs). You provide a YAML file describing the story context, characters, and scenes; the system outputs a structured YAML file with scene narrations and multi-round, in-character conversations.

## Features

- **Scene Narration:** Automatically generates vivid scene descriptions based on your story context.
- **Character Conversations:** Simulates multi-round, in-character dialogue between story participants, considering their goals and backstories.
- **Configurable:** Control conversation rounds and output file location via YAML config.
- **Extensible:** Modular design for easy integration with different LLM providers.

## Project Structure

```
src/
  config.py
  main.py
  story_input.yaml
  story_processor.py
  models/
    __init__.py
    agents.py
    story.py
  services/
    __init__.py
    conversation.py
    llm_client.py
    narrator.py
```

- `src/story_processor.py`: Main script for processing stories.
- `src/models/story.py`: Pydantic models for story, scene, and character.
- `src/services/llm_client.py`: Handles LLM API calls.
- `src/services/narrator.py`: Generates scene narration.
- `src/services/conversation.py`: Manages character conversations.
- `src/story_input.yaml`: Example input file.

## Getting Started

### Prerequisites

- Python 3.8+
- Install dependencies:
  ```sh
  pip install pydantic litellm pyyaml
  ```

### Usage

1. **Prepare your input YAML:**  
   See `src/story_input.yaml` for structure.

2. **Run the processor:**
   ```sh
   python src/story_processor.py [input_file.yaml] [output_file.yaml]
   ```
   - If no arguments are given, defaults to `src/story_input.yaml` and `output.yaml`.

3. **Review the output:**  
   The output YAML will contain scene narrations and grouped conversations.

## Example Input

```yaml
context: "In an enchanted valley where time moves differently, three unlikely companions seek the legendary Crystal of Harmony."
characters:
  "Luna the Moon Mage":
    goal: "To restore balance to the magical realms and prevent the eternal darkness prophecy."
    backstory: "Luna draws power from moonlight and has studied ancient prophecies for centuries. She is wise but sometimes impatient with those who don't understand magic."
  "Brick the Stone Giant":
    goal: "To prove that giants can be gentle protectors, not just destroyers."
    backstory: "Brick was awakened from a thousand-year slumber and wants to help others. He speaks slowly and thinks carefully, but has immense strength and a kind heart."
scenes:
  - scene_no: 0
    context: "The companions discover an ancient temple with three locked doors, each requiring a different approach to open."
config:
  conversation_rounds: 2
  output_file: "output.yaml"
```

## Output

The output YAML will include:
- Narration for each scene.
- Multi-round, in-character conversations grouped by round.

## License

MIT License. See `LICENSE` for details.

---

*Generated by simple-story-narrator.*
